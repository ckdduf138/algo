window.__require=function e(t,o,r){function n(c,p){if(!o[c]){if(!t[c]){var l=c.split("/");if(l=l[l.length-1],!t[l]){var a="function"==typeof __require&&__require;if(!p&&a)return a(l,!0);if(i)return i(l,!0);throw new Error("Cannot find module '"+c+"'")}c=l}var s=o[c]={exports:{}};t[c][0].call(s.exports,function(e){return n(t[c][1][e]||e)},s,s.exports,e,t,o,r)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<r.length;c++)n(r[c]);return n}({GameController:[function(e,t,o){"use strict";cc._RF.push(t,"db747r8TC9K+bm+NY5sMr+Y","GameController");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,c=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,r);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(c=(i<3?n(c):i>3?n(t,o,c):n(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./Player"),p=e("./Tile"),l=cc._decorator,a=l.ccclass,s=l.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.map_tiles=null,t.tiles=[[]],t.player=null,t}var o;return n(t,e),o=t,t.prototype.onLoad=function(){o.instance||(o.instance=this),this.SetGame()},t.prototype.SetGame=function(){this.SetTiles(),this.SetPlayer()},t.prototype.SetTiles=function(){var e=this;this.tiles.length=0,this.map_tiles.children.forEach(function(t,o){e.tiles.push([]);var r=t.y;t.children.forEach(function(t){var n=t.getComponent(p.default),i=t.x;n.world_position=cc.v2(i,r),e.tiles[o].push(n)})}),cc.log(this.tiles)},t.prototype.SetPlayer=function(){this.player.pos_x=10,this.player.pos_y=10;var e=this.tiles[10][10].world_position;this.player.node.setPosition(e)},t.prototype.GetTileType=function(e,t){return this.tiles[e][t].Type},t.instance=null,i([s(cc.Node)],t.prototype,"map_tiles",void 0),i([s(c.default)],t.prototype,"player",void 0),o=i([a],t)}(cc.Component);o.default=u,cc._RF.pop()},{"./Player":"Player","./Tile":"Tile"}],KeyInput:[function(e,t,o){"use strict";cc._RF.push(t,"8ccbb7P6ElFPJd+YXNDBY76","KeyInput");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,c=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,r);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(c=(i<3?n(c):i>3?n(t,o,c):n(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./Player"),p=cc._decorator,l=p.ccclass,a=p.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.player=null,t.keyState={},t}return n(t,e),t.prototype.onLoad=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},t.prototype.onKeyDown=function(e){this.keyState[e.keyCode]=!0,this.handlePlayerMovement(e.keyCode)},t.prototype.onKeyUp=function(e){this.keyState[e.keyCode]=!1},t.prototype.handlePlayerMovement=function(e){switch(e){case cc.macro.KEY.up:this.player.Change_Direction(c.Direction.UP);break;case cc.macro.KEY.down:this.player.Change_Direction(c.Direction.DOWN);break;case cc.macro.KEY.left:this.player.Change_Direction(c.Direction.LEFT);break;case cc.macro.KEY.right:this.player.Change_Direction(c.Direction.RIGHT)}this.player.Move()},i([a(c.default)],t.prototype,"player",void 0),i([l],t)}(cc.Component);o.default=s,cc._RF.pop()},{"./Player":"Player"}],Player:[function(e,t,o){"use strict";cc._RF.push(t,"e3d3fPFoOBCGLmO+khBZy/R","Player");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,c=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,r);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(c=(i<3?n(c):i>3?n(t,o,c):n(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.Direction=void 0;var c,p=e("./GameController"),l=e("./Tile");(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(c=o.Direction||(o.Direction={}));var a=cc._decorator,s=a.ccclass,u=(a.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.direction=c.DOWN,t.moveAble=!0,t.move_time=.1,t}return n(t,e),t.prototype.Change_Direction=function(e){0!=this.moveAble&&(this.moveAble=!1,this.direction=e)},t.prototype.Move=function(){var e=this,t=this.GetNextPos_index(),o=p.default.instance.GetTileType(t.x,t.y),r=p.default.instance.tiles[t.x][t.y].world_position;o!=l.Tile_Type.Wall?(o==l.Tile_Type.Goal&&cc.log("Goal"),cc.tween(this.node).to(this.move_time,{position:cc.v3(r)}).call(function(){e.pos_x=t.x,e.pos_y=t.y,o==l.Tile_Type.Road&&e.Move()}).start()):this.moveAble=!0},t.prototype.GetNextPos_index=function(){var e=this.pos_x,t=this.pos_y;switch(this.direction){case c.UP:e-=1;break;case c.DOWN:e+=1;break;case c.LEFT:t-=1;break;case c.RIGHT:t+=1}return cc.v2(e,t)},i([s],t)}(cc.Component));o.default=u,cc._RF.pop()},{"./GameController":"GameController","./Tile":"Tile"}],Tile:[function(e,t,o){"use strict";cc._RF.push(t,"e1b90/rohdEk4SdmmEZANaD","Tile");var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,c=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,r);else for(var p=e.length-1;p>=0;p--)(n=e[p])&&(c=(i<3?n(c):i>3?n(t,o,c):n(t,o))||c);return i>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.Tile_Type=void 0;var c,p=cc._decorator,l=p.ccclass,a=p.property;(function(e){e[e.Road=0]="Road",e[e.Wall=1]="Wall",e[e.Goal=2]="Goal"})(c=o.Tile_Type||(o.Tile_Type={}));var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Type=c.Road,t.world_position=cc.v2(),t}return n(t,e),i([a({type:cc.Enum(c)})],t.prototype,"Type",void 0),i([l],t)}(cc.Component);o.default=s,cc._RF.pop()},{}]},{},["GameController","KeyInput","Player","Tile"]);