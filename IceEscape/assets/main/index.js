window.__require=function t(e,o,r){function n(i,s){if(!o[i]){if(!e[i]){var p=i.split("/");if(p=p[p.length-1],!e[p]){var a="function"==typeof __require&&__require;if(!s&&a)return a(p,!0);if(c)return c(p,!0);throw new Error("Cannot find module '"+i+"'")}i=p}var l=o[i]={exports:{}};e[i][0].call(l.exports,function(t){return n(e[i][1][t]||t)},l,l.exports,t,e,o,r)}return o[i].exports}for(var c="function"==typeof __require&&__require,i=0;i<r.length;i++)n(r[i]);return n}({GameController:[function(t,e,o){"use strict";cc._RF.push(e,"db747r8TC9K+bm+NY5sMr+Y","GameController");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Player"),s=t("./Tile"),p=cc._decorator,a=p.ccclass,l=p.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.map_tiles=null,e.tiles=[[]],e.player=null,e.gameIndex=0,e}var o;return n(e,t),o=e,e.prototype.onLoad=function(){o.instance=this,this.player.Init(),this.SetGame()},e.prototype.SetGame=function(){this.SetTiles(),this.SetPlayer()},e.prototype.SetTiles=function(){var t=this;this.tiles.length=0,this.map_tiles.children.forEach(function(e,o){t.tiles.push([]);var r=e.y;e.children.forEach(function(e){var n=e.getComponent(s.default),c=e.x;n.world_position=cc.v2(c,r),t.tiles[o].push(n)})}),cc.log(this.tiles)},e.prototype.SetPlayer=function(){this.player.pos_x=10,this.player.pos_y=10;var t=this.tiles[10][10].world_position;this.player.node.setPosition(t)},e.prototype.GetTileType=function(t,e){return this.tiles[t][e].Type},e.instance=null,c([l(cc.Node)],e.prototype,"map_tiles",void 0),c([l(i.default)],e.prototype,"player",void 0),c([l(Number)],e.prototype,"gameIndex",void 0),o=c([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./Player":"Player","./Tile":"Tile"}],KeyInput:[function(t,e,o){"use strict";cc._RF.push(e,"8ccbb7P6ElFPJd+YXNDBY76","KeyInput");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Player"),s=cc._decorator,p=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.player=null,e.keyState={},e}return n(e,t),e.prototype.onLoad=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.onKeyDown=function(t){this.keyState[t.keyCode]=!0,this.handlePlayerMovement(t.keyCode)},e.prototype.onKeyUp=function(t){this.keyState[t.keyCode]=!1},e.prototype.handlePlayerMovement=function(t){switch(t){case cc.macro.KEY.up:this.player.Change_Direction(i.Direction.UP);break;case cc.macro.KEY.down:this.player.Change_Direction(i.Direction.DOWN);break;case cc.macro.KEY.left:this.player.Change_Direction(i.Direction.LEFT);break;case cc.macro.KEY.right:this.player.Change_Direction(i.Direction.RIGHT)}this.player.Move()},c([a(i.default)],e.prototype,"player",void 0),c([p],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./Player":"Player"}],MainController:[function(t,e,o){"use strict";cc._RF.push(e,"c57c5UtkK5PPY+VEs/wHQlG","MainController");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Stage"),s=cc._decorator,p=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stages=[],e.stageKey="Stage_Clear_Info",e}return n(e,t),e.prototype.onLoad=function(){this.CheckStageProgress(),this.SetStage(),this.stages.forEach(function(t){t.SetStage()})},e.prototype.Btn_Clicked_Stage=function(t,e){if(1!=this.stages[parseInt(e)].isLocked){var o="Game"+e,r=cc.game._sceneInfos.map(function(t){return t.url}),n=[];r.forEach(function(t){var e=t.match(/Game\d+/);e&&n.push(e[0])}),cc.log(n),n.includes(o)?cc.director.loadScene(o):alert("Stage "+e+"\nCOMING SOON..")}},e.prototype.SetStage=function(){for(var t=0;t<this.stages.length;t++){if(0==this.stages[t].isClear)return this.stages[t].isLocked=!1;this.stages[t].isLocked=!1}},e.prototype.CheckStageProgress=function(){var t=this.GetCookie(this.stageKey);if(console.log("stage_info_cookie: "),console.log(t),null==t)this.SetCookie();else{var e=JSON.parse(t);this.stages.forEach(function(t,o){t.isClear=e[o]})}},e.prototype.SetCookie=function(){var t=JSON.stringify(this.stages.map(function(t){return t.isClear})),e=this.stageKey+"="+t+"; expires=Tue, 19 Jan 2038 03:14:07 GMT";document.cookie=e,console.log("cookie_string: "),console.log(e)},e.prototype.GetCookie=function(t){for(var e=t+"=",o=document.cookie.split(";"),r=0;r<o.length;r++){for(var n=o[r];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(e))return n.substring(e.length,n.length)}return null},c([a([i.default])],e.prototype,"stages",void 0),c([p],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./Stage":"Stage"}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"e3d3fPFoOBCGLmO+khBZy/R","Player");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.Direction=void 0;var i,s=t("./GameController"),p=t("./Tile"),a=t("./UI/UiController");(function(t){t[t.UP=0]="UP",t[t.DOWN=1]="DOWN",t[t.LEFT=2]="LEFT",t[t.RIGHT=3]="RIGHT"})(i=o.Direction||(o.Direction={}));var l=cc._decorator,u=l.ccclass,f=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.direction=i.DOWN,e.moveAble=!0,e.move_time=.1,e.stageKey="Stage_Clear_Info",e}return n(e,t),e.prototype.Init=function(){this.direction=i.DOWN,this.moveAble=!0},e.prototype.Change_Direction=function(t){0!=this.moveAble&&(this.moveAble=!1,this.direction=t)},e.prototype.Move=function(){var t=this,e=this.GetNextPos_index(),o=s.default.instance.GetTileType(e.x,e.y),r=s.default.instance.tiles[e.x][e.y].world_position;o!=p.Tile_Type.Wall?cc.tween(this.node).to(this.move_time,{position:cc.v3(r)}).call(function(){t.pos_x=e.x,t.pos_y=e.y,o==p.Tile_Type.Road?t.Move():o==p.Tile_Type.Goal&&(t.moveAble=!1,t.Finish())}).start():this.moveAble=!0},e.prototype.GetNextPos_index=function(){var t=this.pos_x,e=this.pos_y;switch(this.direction){case i.UP:t-=1;break;case i.DOWN:t+=1;break;case i.LEFT:e-=1;break;case i.RIGHT:e+=1}return cc.v2(t,e)},e.prototype.Finish=function(){cc.log("Goal"),a.default.instance.popup.On();for(var t=this.GetCookie(this.stageKey),e=s.default.instance.gameIndex,o=JSON.parse(t),r=0;r<o.length;r++)if(r==e){o[r]=!0;break}this.SetCookie(o)},e.prototype.GetCookie=function(t){for(var e=t+"=",o=document.cookie.split(";"),r=0;r<o.length;r++){for(var n=o[r];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(e))return n.substring(e.length,n.length)}return null},e.prototype.SetCookie=function(t){var e=JSON.stringify(t),o=this.stageKey+"="+e+"; expires=Tue, 19 Jan 2038 03:14:07 GMT";document.cookie=o},c([u],e)}(cc.Component));o.default=f,cc._RF.pop()},{"./GameController":"GameController","./Tile":"Tile","./UI/UiController":"UiController"}],Popup:[function(t,e,o){"use strict";cc._RF.push(e,"e5753OWvThJfa2WG7+t1a0N","Popup");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,p=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.Init=function(){this.Off()},e.prototype.Btn_Popup_Clicked=function(){cc.director.loadScene("Main")},e.prototype.On=function(){this.node.active=!0},e.prototype.Off=function(){this.node.active=!1},c([s],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],Stage:[function(t,e,o){"use strict";cc._RF.push(e,"1c8cfok7m9G3rKlFyPTx5VN","Stage");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,p=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lock=null,e.un_lock=null,e.isLocked=!0,e.isClear=!1,e}return n(e,t),e.prototype.SetStage=function(){0==this.isLocked||1==this.isClear?(this.lock.active=!1,this.un_lock.active=!0):(this.lock.active=!0,this.un_lock.active=!1)},c([p(cc.Node)],e.prototype,"lock",void 0),c([p(cc.Node)],e.prototype,"un_lock",void 0),c([s],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],Tile:[function(t,e,o){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","Tile");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.Tile_Type=void 0;var i,s=cc._decorator,p=s.ccclass,a=s.property;(function(t){t[t.Road=0]="Road",t[t.Wall=1]="Wall",t[t.Goal=2]="Goal"})(i=o.Tile_Type||(o.Tile_Type={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Type=i.Road,e.world_position=cc.v2(),e}return n(e,t),c([a({type:cc.Enum(i)})],e.prototype,"Type",void 0),c([p],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],UiController:[function(t,e,o){"use strict";cc._RF.push(e,"0ce54itieJIUZD2rCox6CtD","UiController");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Popup"),s=cc._decorator,p=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.popup=null,e}var o;return n(e,t),o=e,e.prototype.onLoad=function(){o.instance=this,this.popup.Init()},e.instance=null,c([a(i.default)],e.prototype,"popup",void 0),o=c([p],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./Popup":"Popup"}]},{},["GameController","KeyInput","MainController","Stage","Player","Tile","Popup","UiController"]);